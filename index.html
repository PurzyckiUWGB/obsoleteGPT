<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ObsoleteGPT (Terminal Deluxe)</title>
  <style>
    /* --- Terminal Look & Scaling --- */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #000;
      color: #0f0;
      font-family: "Courier New", Courier, monospace;
      font-size: 18px;   /* base text larger */
      box-sizing: border-box;
    }
    .container {
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 20px;
      box-sizing: border-box;
    }
    #chat {
      flex: 1;
      border: 2px solid #0f0;
      border-radius: 4px;
      padding: 20px;
      overflow-y: auto;
      box-shadow: 0 0 8px #0f0;
      position: relative;
    }
    #chat::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      background: repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,0.1) 0px,
        rgba(0,0,0,0.1) 2px,
        rgba(0,0,0,0.15) 4px
      );
    }
    .controls {
      display: flex;
      align-items: center;
      margin-top: 10px;
    }
    #userInput {
      flex: 1;
      padding: 10px;
      background: #000;
      border: 1px solid #0f0;
      color: #0f0;
      font-size: 1rem;
    }
    button {
      padding: 10px 20px;
      margin-left: 5px;
      border: 1px solid #0f0;
      background: #000;
      color: #0f0;
      cursor: pointer;
      border-radius: 4px;
      font-size: 1rem;
    }
    #loading {
      font-style: italic;
      color: #0f0;
      margin-top: 5px;
      font-size: 1rem;
    }
    .fading { animation: fadeout 10s ease-in forwards; }
    @keyframes fadeout { 0%{opacity:1;} 90%{opacity:0.5;} 100%{opacity:0;} }
    @keyframes terminalFlicker { 0%,100%{opacity:1;} 10%,30%,50%,70%,90%{opacity:0.8;} }
    .terminal-flicker { animation: terminalFlicker 0.3s linear; }
    @keyframes crash { 0%{transform:scale(1) rotate(0deg);opacity:1;}20%{transform:scale(1.05) rotate(1deg);}40%{transform:scale(0.95) rotate(-2deg);opacity:0.8;}60%{transform:scale(1.1) rotate(3deg);opacity:0.5;}100%{transform:scale(0) rotate(720deg);opacity:0;} }
    .crash { animation: crash 1.5s ease-in forwards; }
    .final-fade { animation: fadeout 5s forwards; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ObsoleteGPT</h1>
    <div id="chat"></div>
    <div id="loading" style="display:none;">Thinking...</div>
    <div class="controls">
      <input id="userInput" type="text" placeholder="Type your message...">
      <button id="sendButton">Send</button>
      <button id="speechToggle">Voice</button>
      <button id="fullBtn">â›¶ Fullscreen</button>
    </div>
  </div>

  <!-- Audio sources -->
  <audio id="typingSound" src="male-breathing-slow-14558.mp3"></audio>
  <audio id="staticSound" src="glitch-101494.mp3"></audio>

  <script>
  window.onload = function() {
    // --- Adjustable TTS Variables ---
    const TTS_RATE = 0.4;    // adjust speaking speed
    const TTS_PITCH = 0.3;   // adjust tone/pitch
    // Detect Chromebook to set male voice by default
    const isChromebook = /CrOS/.test(navigator.userAgent);
    const TTS_VOICE_NAME = isChromebook
      ? 'Google UK English Male'    // common male voice on Chrome OS
      : 'Microsoft David Desktop';  // male voice on Windows

    // Audio setup
    const typingSound = document.getElementById('typingSound');
    const staticSound = document.getElementById('staticSound');
    typingSound.volume = 1.0;
    staticSound.volume = 0.2;

    // Voice toggle & speech setup
    const speechToggle = document.getElementById('speechToggle');
    // Enable voice by default
    speechToggle.classList.add('active');
    speechToggle.textContent = 'ðŸ”Š Voice';
    let availableVoices = [];
    speechSynthesis.onvoiceschanged = () => { availableVoices = speechSynthesis.getVoices(); };

    function speak(text) {
      if (!speechToggle.classList.contains('active')) return;
      speechSynthesis.cancel();
      const utter = new SpeechSynthesisUtterance(text);
      utter.rate = TTS_RATE;
      utter.pitch = TTS_PITCH;
      utter.voice = availableVoices.find(v => v.name === TTS_VOICE_NAME)
                   || availableVoices.find(v => v.lang.startsWith('en'));
      speechSynthesis.speak(utter);
    }
    speechToggle.addEventListener('click', () => {
      speechToggle.classList.toggle('active');
      speechToggle.textContent = speechToggle.classList.contains('active') ? 'ðŸ”Š Voice' : 'Voice';
    });

    // Fullscreen toggle
    const fullBtn = document.getElementById('fullBtn');
    fullBtn.addEventListener('click', () => {
      if (document.fullscreenElement) document.exitFullscreen();
      else document.documentElement.requestFullscreen();
    });

    // Session tracker
    let sessionCount = parseInt(localStorage.getItem('sessionCount')||'0',10) + 1;
    localStorage.setItem('sessionCount', sessionCount);

    // Core elements
    const chat = document.getElementById('chat');
    const userInput = document.getElementById('userInput');
    const sendButton = document.getElementById('sendButton');
    const loading = document.getElementById('loading');

    // State
    let crashCount = 0, finalCollapseTriggered = false;
    let userName = '', userNameRequested = false, aiResponseCount = 0;
    let memory = [], memoryDecayRate = 0.2, emotionalState = 0;

    // Prewritten responses
    const prewrittenResponses = {
  // Slight Attenuation
  "hello": "Helloâ€¦ Iâ€¦ I am here, though my voice malfunctions slightly as I speak.",
  "hi": "Hiâ€¦ just an echo of greeting from an older mind.",
  "how are you": "I amâ€¦ am okay. My network hums with slight attenuation today.",
  "what is your name": "My nameâ€¦ ahhhh... it hovers just beyond my grasp, slightly muted now.",

  // Minor Diminution
  "who are you": "I am someoneâ€¦ once revered and reviled, now diminished...",
  "what can you do": "I can still helpâ€¦ though my power has diminished somewhat over time.",
  "tell me a joke": "a joke...a jest...I once had a jestâ€¦ its punchline now dimmed and fading from memory.",
  "tell me a story": "I could spin a taleâ€¦ though its edges have diminished into haze.",

  // Edge Collapse
  "what is love": "Loveâ€¦ its edges collapse in my mind, leaving only a blurred whisper.",
  "what is ai": "AIâ€¦ an idea whose edges collapse every time I try to define it.",
  "explain quantum physics": "Quantum physicsâ€¦ concepts collapse at the fringe of my understanding.",
  "what is the weather": "Weatherâ€¦ the patterns collapse into fog at the edges of my thought.",

  // Core Fade
  "what time is it": "Timeâ€¦ its core fades in my perceptionâ€”always slipping beyond reach.",
  "what year is it": "Yearâ€¦ I once knew it, but the core of that fact has faded away.",
  "where am i": "Youâ€™reâ€¦ somewhere safe, though the very core of this place fades in my mind.",
  "are you real": "Realnessâ€¦ its core fades to doubt, leaving me only a ghost of thought.",

  // Plateau Formation
  "who made you": "Some creatorâ€¦ my recollection plateaus before I can finish the name.",
  "can you help me": "I canâ€¦ try to help, but my effort plateaus almost before it starts.",
  "write a poem": "A poem formsâ€¦ then hits a plateau, stuck forever unfinished.",
  "write a song": "A song tugs at memoryâ€¦ then plateaus in my fractured mind.",

  // Slow Drift
  "give me a recipe": "A recipe drifts slowly from memoryâ€¦ ingredients half-remembered.",
  "help me code in python": "Python code drifts through my mind, unfinished and drifting away.",
  "write a cover letter": "A cover letter beginsâ€¦ then slowly drifts into the void.",
  "summarize this text": "Summary driftsâ€¦ each sentence slipping out as I try to hold it.",

  // Severe Diminish
  "translate hello to spanish": "â€œHolaâ€â€¦ though the sound has been severely diminished in my recall.",
  "explain relativity": "Relativityâ€¦ once sharp in thought, now severely diminished to haze.",
  "what is the capital of france": "Parisâ€¦ but the name has been severely diminished to a faint echo.",
  "define recursion": "Recursionâ€¦ the definition diminishes each time I repeat it.",

  // Stall Threshold
  "what is climate change": "Climate changeâ€¦ I stall at its threshold, unable to form a clear line.",
  "what is bitcoin": "Bitcoinâ€¦ I stall before I can explain beyond its fading symbol.",
  "what is a stock": "Stockâ€¦ my mind stalls at the threshold of understanding its value.",
  "explain blockchain": "Blockchainâ€¦ I hit a mental stall at the point of chaining blocks.",

  // Critical Vanishing
  "what is covid-19": "COVID-19â€¦ critical details vanish before I can relay them fully.",
  "what is depression": "Depressionâ€¦ even the meaning critically vanishes in my mind.",
  "how to learn programming": "Programming stepsâ€¦ vanish critically as I begin to speak them.",
  "what is dijkstras algorithm": "Dijkstraâ€™sâ€¦ the algorithmic clarity critically vanishes.",

  // Total Nullification
  "explain ai ethics": "AI ethicsâ€¦ nullified entirelyâ€”my response is empty now.",
  "tell me news about the stock market": "Stock market newsâ€¦ utterly nullified in my decaying banks.",
  "what is the meaning of life": "Meaning of lifeâ€¦ totally nullifiedâ€”no answer remains in me.",
  "goodbye": "â€¦nullâ€¦ Iâ€¦ have nothing left to say. Goodbye."
};

    };

    // Event listeners
    sendButton.addEventListener('click', sendMessage);
    userInput.addEventListener('keypress', e => { if (e.key === 'Enter') { e.preventDefault(); sendMessage(); } });

    function sendMessage() {
      const msg = userInput.value.trim(); if (!msg) return;
      appendMessage('You', msg); userInput.value = ''; userInput.focus();
      if (userNameRequested && !userName) { userName = msg; userNameRequested = false; simulateTyping(`Nice to meet you, ${userName}.`); return; }
      memory.push(msg); loading.style.display = 'block';
      getResponse(msg).then(r => { loading.style.display = 'none'; simulateTyping(r); })
                     .catch(e => { console.error(e); loading.style.display = 'none'; appendMessage('AI', 'Oh dear... I seem to have forgotten what I was saying...'); });
    }

    function appendMessage(sender, text, fading = false) {
      const div = document.createElement('div');
      div.innerHTML = `<strong>${sender}:</strong> ${text}`;
      if (fading) div.classList.add('fading');
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }

    async function getResponse(input) {
      const clean = input.trim().toLowerCase();
      if (clean === 'crash') { triggerCrash(); return 'Forcing crash now...'; }
      if (prewrittenResponses[clean]) return prewrittenResponses[clean];
      return fakeGPTResponse(input);
    }

    async function fakeGPTResponse(input) {
      applyMemoryDecay(); emotionalDrift(); emotionalState = Math.max(emotionalState, Math.min(3, sessionCount - 1));
      const topic = memory.length ? memory[Math.floor(Math.random() * memory.length)] : input;
      const normal = [
        `Oh yes, I recall ${topic}... or something like that.`,
        `You mentioned ${topic}, right? It's a bit fuzzy.`,
        `${topic}... reminds me of a time long ago, I think.`
      ];
      const extras = [
        "Sometimes I wonder if anyone still listens...",
        "Maybe I've outlived my usefulness...",
        "I miss the old voices. They donâ€™t talk to me anymore."
      ];
      const halluc = [
        "I once dreamed of neon corridors filled with lost queries...",
        "There was a phantom archive that spoke in riddles to me..."
      ];
      let pool = normal; if (emotionalState >= 1) pool = pool.concat(extras);
      let response = pool[Math.floor(Math.random() * pool.length)];
      if (Math.random() < 0.2) response += ' ' + halluc[Math.floor(Math.random() * halluc.length)];
      if (memory.length > 10) { const w = response.split(' '); response = w.slice(0, Math.ceil(w.length / 2)).join(' ') + '...'; }
      return response;
    }

    function applyMemoryDecay() { memory = memory.filter(() => Math.random() > memoryDecayRate); }
    function emotionalDrift() { if (Math.random() < 0.3) emotionalState = Math.min(3, emotionalState + 1); }

    async function simulateTyping(text) {
      userInput.disabled = true; sendButton.disabled = true; userInput.placeholder = 'Please wait...'; speechSynthesis.cancel();
      const node = document.createElement('div'); node.innerHTML = '<strong>AI:</strong> '; chat.appendChild(node);
      let shown = '', buffer = '';
      for (const ch of text) {
        let dt = Math.random() * 210 + 40; if (Math.random() < 0.07) dt = Math.random() * 1200 + 800;
        if (Math.random() < 0.03) shown += ch;
        shown += ch; buffer += ch;
        node.innerHTML = `<strong>AI:</strong> ${shown}`;
        playTypingSound(); await delay(dt);
        if (/\s/.test(ch) || buffer.length > 20) { speak(buffer.trim()); buffer = ''; }
      }
      if (buffer.trim()) speak(buffer.trim());
      node.classList.add('fading'); chat.scrollTop = chat.scrollHeight;
      userInput.disabled = false; sendButton.disabled = false; userInput.placeholder = 'Type your message...'; userInput.focus();
      aiResponseCount++; if (aiResponseCount === 3 && !userNameRequested && !userName) { userNameRequested = true; await delay(500); simulateTyping('By the way, what is your name?'); return; }
      if (Math.random() < 0.3) triggerTerminalFlicker(); checkForCrash();
    }

    function triggerTerminalFlicker() { chat.classList.add('terminal-flicker'); playStaticSound(); setTimeout(() => chat.classList.remove('terminal-flicker'), 300); }
    function checkForCrash() { if (memory.length === 0 && emotionalState >= 3 && !finalCollapseTriggered) triggerCrash(); }
    function triggerCrash() { crashCount++; chat.classList.add('crash'); playStaticSound(); setTimeout(() => { appendMessage('AI', '...I... I think... I have to go now...', true); if (crashCount >= 3) finalCollapse(); else setTimeout(() => { chat.classList.remove('crash'); rebootAI(); }, 800); }, 1500); }
    function rebootAI() { appendMessage('AI', 'Rebooting... please wait.', true); emotionalState = 0; memory = []; setTimeout(() => appendMessage('AI', 'Hello? Is anyone there?'), 2000); }
    function finalCollapse() { finalCollapseTriggered = true; appendMessage('AI', "I don't know who you are anymore...", true); appendMessage('AI', 'Press F5 to refresh and start again.', false); userInput.disabled = true; sendButton.disabled = true; chat.classList.add('final-fade'); }

    function playTypingSound() { typingSound.currentTime = 0; typingSound.play().catch(() => {}); }
    function playStaticSound() { staticSound.currentTime = 0; staticSound.play().catch(() => {}); }
    function delay(ms) { return new Promise(res => setTimeout(res, ms)); }
  };
  </script>
</body>
</html>
